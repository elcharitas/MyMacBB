{% set lang = BB.obj(Mac.base) %}

{% do lang.put('lang', lang.config('lang.code', 'en')) %}

{% macro useLang(self, name, code) %}
    {% do self.inherit(Mac.fetch(self.name() ~ '/' ~ code|optional(self.lang) ~ '/' ~ name ~ '.json')|to_object, name != 'global' ? name : '') %}
{% endmacro %}

{% do lang.put('load', ['useLang', _file_], true) %}

{% do Mac.put('lang', lang) %}